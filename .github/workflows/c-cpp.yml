name: C/C++ CI

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  build-linux:
    runs-on:
      - ubuntu-24.04
      - ubuntu-22.04
      - ubuntu-24.04-arm
      - ubuntu-22.04-arm
      - windows-2025
      - windows-2022
      - windows-2019
      - windows-11-arm
      - macos-15
      - macos-14
      - macos-13
    env:
      TZ: America/New_York
    steps:
    - uses: actions/checkout@v4
    - name: make s
      run: make s
    - name: make test
      run: make test
  build-freebsd:
    runs-on: ubuntu-latest
    env:
      TZ: America/New_York
    steps:
    - uses: actions/checkout@v4
    - uses: vmactions/freebsd-vm@v1
      name: start freebsd
    - name: make s
      run: make s
    - name: make test
      run: make test
